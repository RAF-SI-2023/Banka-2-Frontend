<section class="container">
	<mat-card>
		<mat-card-header>
			<h2>Narudžbinske transakcije</h2>
			<div class="form">
				<mat-form-field>
					<mat-label>Pretraži</mat-label>
					<input
						#input
						(keyup)="applyFilter($event)"
						matInput
					/>
				</mat-form-field>
			</div>
		</mat-card-header>

		<mat-card-content>
			<div class="tableContainer">
				<div
					class="mat-elevation-z8"
					style="box-shadow: none"
				>
					<table
						class="unselectable"
						mat-table
						[dataSource]="dataSource"
						matSort
					>
						<ng-container matColumnDef="id">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								ID
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{ row.id ? row.id : '-' }}
							</td>
						</ng-container>

						<ng-container matColumnDef="userId">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Korisnički ID
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{ row.userId ? row.userId : '-' }}
							</td>
						</ng-container>

						<ng-container matColumnDef="orderId">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								ID narudžbine
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{ row.orderId ? row.orderId : '-' }}
							</td>
						</ng-container>

						<ng-container matColumnDef="marginsAccountId">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								ID maržnog računa
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{
									row.marginsAccountId
										? row.marginsAccountId
										: '-'
								}}
							</td>
						</ng-container>

						<ng-container matColumnDef="createdAt">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Datum izvršenja
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{
									row.createdAt
										? (row.createdAt
											| epochToDate
											| date: 'dd.MM.yyyy.')
										: '-'
								}}
							</td>
						</ng-container>

						<ng-container matColumnDef="accountNumber">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Broj računa
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{
									row.accountNumber ? row.accountNumber : '-'
								}}
							</td>
						</ng-container>

						<ng-container matColumnDef="description">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Opis
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{ row.description ? row.description : '-' }}
							</td>
						</ng-container>

						<ng-container matColumnDef="currencyCode">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Valuta
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{ row.currencyCode ? row.currencyCode : '-' }}
							</td>
						</ng-container>

						<ng-container matColumnDef="type">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Tip
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{ row.type ? row.type : '-' }}
							</td>
						</ng-container>

						<ng-container matColumnDef="loanValue">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Iznos duga
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{ row.loanValue ? row.loanValue : '-' }}
							</td>
						</ng-container>

						<ng-container matColumnDef="initialMargin">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Inicijalna marža
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{
									row.initialMargin ? row.initialMargin : '-'
								}}
							</td>
						</ng-container>

						<ng-container matColumnDef="maintenanceMargin">
							<th
								*matHeaderCellDef
								mat-header-cell
								mat-sort-header
							>
								Marža za održavanje
							</th>
							<td
								*matCellDef="let row"
								mat-cell
							>
								{{
									row.maintenanceMargin
										? row.maintenanceMargin
										: '-'
								}}
							</td>
						</ng-container>
						<tr
							*matHeaderRowDef="displayedColumns"
							mat-header-row
						></tr>
						<tr
							mat-row
							(click)="selectRow(row)"
							[class.row-selected]="selectedRow?.id === row.id"
							*matRowDef="let row; columns: displayedColumns"
						></tr>
						<tr
							*matNoDataRow
							class="mat-row"
						>
							<td
								class="mat-cell"
								colspan="4"
							>
								Nije pronađen podatak za unetu vrednost: "{{
									input.value
								}}"
							</td>
						</tr>
					</table>
				</div>
			</div>
			<div id="paginatorContainer">
				<mat-paginator
					[hidePageSize]="true"
					[pageSize]="10"
				></mat-paginator>
			</div>
		</mat-card-content>
	</mat-card>
</section>
