<section class="container">
	<div class="tables">
		<mat-card>
			<mat-card-header>
				<h2>Računi</h2>
			</mat-card-header>
			<mat-card-content>
				<div class="tableContainer">
					<div class="mat-elevation-z8" style="box-shadow: none">
						<table class="unselectable" mat-table [dataSource]="accountNumberDataSource" matSort>
							<ng-container matColumnDef="accountType">
								<th *matHeaderCellDef mat-header-cell mat-sort-header>
									Tip
								</th>
								<td *matCellDef="let row" mat-cell>
									{{ row.accountType | translate }}
								</td>
							</ng-container>

							<ng-container matColumnDef="accountNumber">
								<th *matHeaderCellDef mat-header-cell mat-sort-header>
									Broj računa
								</th>
								<td *matCellDef="let row" mat-cell>
									{{ row.accountNumber }}
								</td>
							</ng-container>

							<ng-container matColumnDef="accountBalance">
								<th mat-header-cell *matHeaderCellDef>Dostupno stanje</th>
								<td mat-cell *matCellDef="let row">
									<!-- Display availableBalance if accountType is DOMESTIC -->
									<ng-container *ngIf="row.accountType === 'DOMESTIC_CURRENCY_ACCOUNT'">
										{{ row.availableBalance }} {{ row.currencyCode }}
									</ng-container>
									<!-- Display foreignCurrencyHolderDto if accountType is FOREIGN -->
									<ng-container *ngIf="row.accountType === 'FOREIGN_CURRENCY_ACCOUNT'">
										<ng-container *ngFor="let currency of row.foreignCurrencyHolderDto">
											<div>{{ currency.availableBalance }} {{ currency.currencyCode }}</div>
										</ng-container>
									</ng-container>
								</td>
							</ng-container>

							<tr *matHeaderRowDef="displayedAccountColumns" mat-header-row></tr>
							<tr mat-row (click)="selectAccountRow(row)"
								[class.row-selected]="selectedAccount?.accountNumber === row.accountNumber"
								*matRowDef="let row; columns: displayedAccountColumns"></tr>

							<tr *matNoDataRow class="mat-row">
								<td class="mat-cell" colspan="4">
									Nije pronađen podatak za unetu vrednost: "{{ input.value }}"
								</td>
							</tr>
						</table>
					</div>
				</div>
				<div class="paginatorContainer">
					<mat-paginator [hidePageSize]="true" [pageSize]="3"></mat-paginator>
				</div>
			</mat-card-content>
		</mat-card>

		<mat-card>
			<mat-card-header>
				<h2>Krediti</h2>
				<div class="form">
					<mat-form-field>
						<mat-label>
							Pretraži
						</mat-label>
						<input #input (keyup)="applyFilter($event)" matInput />
					</mat-form-field>
					<button mat-raised-button class="buttons" color="accent" (click)="redirectToCreateRequest()">Kreiraj
						zahtev</button>
				</div>

			</mat-card-header>
			<mat-card-content>
				<div class="tableContainer">
					<div class="mat-elevation-z8" style="box-shadow: none">
						<table class="unselectable" mat-table [dataSource]="dataSource" matSort>
							<ng-container matColumnDef="creditName">
								<th *matHeaderCellDef mat-header-cell mat-sort-header>
									Naziv
								</th>
								<td *matCellDef="let row" mat-cell>
									{{ row.creditName }}
								</td>
							</ng-container>

							<ng-container matColumnDef="creditNumber">
								<th *matHeaderCellDef mat-header-cell mat-sort-header>
									Broj
								</th>
								<td *matCellDef="let row" mat-cell>
									{{ row.creditNumber }}
								</td>
							</ng-container>

							<ng-container matColumnDef="creditAmount">
								<th *matHeaderCellDef mat-header-cell mat-sort-header>
									Iznos
								</th>
								<td *matCellDef="let row" mat-cell>
									{{ row.creditAmount }}
								</td>
							</ng-container>

							<ng-container matColumnDef="currencyCode">
								<th *matHeaderCellDef mat-header-cell mat-sort-header>
									Valuta
								</th>
								<td *matCellDef="let row" mat-cell>
									{{ row.currencyCode }}
								</td>
							</ng-container>

							<tr *matHeaderRowDef="displayedColumns" mat-header-row></tr>
							<tr mat-row (click)="selectRow(row)" (dblclick)="viewCredit(row)"
								[class.row-selected]="selectedCredit?.creditNumber === row.creditNumber"
								*matRowDef="let row; columns: displayedColumns"></tr>

							<tr *matNoDataRow class="mat-row">
								<td class="mat-cell" colspan="4">
									Nije pronađen podatak za unetu vrednost: "{{ input.value }}"
								</td>
							</tr>
						</table>
					</div>
				</div>
				<div id="paginatorContainer">
					<mat-paginator [hidePageSize]="true" [pageSize]="10"></mat-paginator>
				</div>
			</mat-card-content>
		</mat-card>
	</div>
</section>